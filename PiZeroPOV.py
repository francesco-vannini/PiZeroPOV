import RPi.GPIO as GPIO
import time

GPIO.setmode(GPIO.BOARD)

chan_list = [11,12,13,15,16,18,22,7]

A = [[0,1,1,1,1,1,1,1],[1,0,0,1,1,0,0,0],[0,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
B = [[1,1,1,1,1,1,1,1],[1,0,0,1,1,0,0,1],[0,1,1,0,1,1,1,0],[0,0,0,0,0,0,0,0]]
C = [[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0]]
D = [[1,1,1,1,1,1,1,1],[0,1,0,0,0,0,0,1],[0,0,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
E = [[1,1,1,1,1,1,1,1],[1,0,0,1,1,0,0,1],[1,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0]]
F = [[1,1,1,1,1,1,1,1],[1,0,0,1,1,0,0,0],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]
G = [[1,1,1,1,1,1,1,1],[1,0,0,0,1,1,0,1],[1,0,0,0,1,1,1,1],[0,0,0,0,0,0,0,0]]
H = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
I = [[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]
J = [[0,0,0,0,0,0,1,1],[0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
K = [[1,1,1,1,1,1,1,1],[0,0,1,1,1,1,0,0],[1,1,0,0,0,0,1,1],[0,0,0,0,0,0,0,0]]
L = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
M = [[1,1,1,1,1,1,1,1],[0,0,1,1,0,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
N = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
O = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
P = [[1,1,1,1,1,1,1,1],[1,0,0,1,0,0,0,0],[0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]
Q = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
R = [[1,1,1,1,1,1,1,1],[1,0,0,1,1,0,1,0],[0,1,1,0,0,0,0,1],[0,0,0,0,0,0,0,0]]
S = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
T = [[1,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]
U = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
V = [[1,1,1,1,1,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,0]]
W = [[1,1,1,1,0,0,0,0],[0,0,0,1,1,1,0,0],[1,1,1,1,0,0,0,0],[0,0,0,0,0,0,0,0]]
X = [[1,1,1,0,0,1,1,1],[0,0,0,1,1,0,0,0],[1,1,1,0,0,1,1,1],[0,0,0,0,0,0,0,0]]
Y = [[1,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1],[1,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]
Z = [[1,1,1,1,1,1,1,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,0,0]]
Space = [[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]

alphabet = {'a': A,'b': B,'c': C,'d': D,'e': E,'f': F,'g': G,'h': H,'i': I,'j': J,'k': K,'l': L,'m': M,'n': N,'o': O,'p': P,'q': Q,'r': R,'s': S,'t': T,'u': U,'v': V,'w': W,'x': X,'y': Y,'z': Z,' ': Space}

t0 = time.time()

povText = ""

def displayChar(character):
	for row in range(0, len(character)):
		for col in range(0, len(character[row])):
			GPIO.output(chan_list[col], character[row][col])
		time.sleep(0.002)

def printPov(text):
	for char in text:
		displayChar(alphabet[char])

def readTextFile():
	with open('pov.txt', 'r') as myfile:
    		data=myfile.read().replace('\n', '')
	return data

GPIO.setup(chan_list, GPIO.OUT)

try:
	povText = readTextFile()
	while (1):		
		printPov(povText)
		if (int(time.time() - t0)%10) == 0:
			povText = readTextFile()
except KeyboardInterrupt:
    print
finally:
	GPIO.cleanup()
